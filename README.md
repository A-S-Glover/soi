# soi
README Current as of 04/16/2024

-	The dataset is generated via the .csv files available at https://www.irs.gov/statistics/soi-tax-stats-county-data. IRS SOI is the creator and owner of these data, I only consolidated their files to make researcher access more convenient. Data in the consolidated file were retrieved 3/28/2024.  Very limited changes to the raw IRS data were made beyond consolidation. The only additions are a field for the year and a 5 digit FIPS identifier based on the State and County FIPS variables, as well as the addition of STATA labels to simplify use of the data for researchers unfamiliar with the SOI variables. The only deletions were the state level observations (identifiable in the original .csv files with countyfips==000) so that observations are consistently at the County-Year-Bracket level, identified by variables fips, year, and agi_stub. For variables populated in every period from 2010 - 2021, there are 295,310 observations. Both a STATA and .csv version of the 2010 - 2021 consolidation are available.

-	The SOI provided documentation for each year is available in the “DOCUMENTATION” folder. If you are using less common fields (i.e., fields that do not appear in all years), I would encourage you to review the documentation for the field of interest in the applicable years. 

-	STATA Labels are based on the most current year definitions (2021 for most variables). If a variable does not exist in 2021, I use the most recent year in which it appears.

-	Note that SOI occasionally “re-uses” variables. For example, variable n2 means “Number of exemptions” prior to 2018 and “Number of individuals” for 2018 forward. Similarly, n10971 and a10971 are re-used for the first economic impact payments (2020) and the third economic impact payment (2021). Check the documentation “Nature of Changes” section for the years of interest to ensure no variable definitions changed.

-	Each year _t_ of data is based on all returns filed during the 12 month period from Jan 1 _t+1_ through Dec 31 _t+1_. While the large majority of returns filed during that period are applicable to tax year _t_, the IRS reports they receive a limited number of late filings from earlier years and include those. This is a (minor) source of measurement error.

-	Missing fields: in 2010 and 2011, IRS indicates a missing field with the value 0.0001. This indicates the field was combined with its nearest neighbor income bracket or nearest neighbor county. The documentation for 2012 onward notes they will no longer provide this indicator, and will instead indicate missings with a double asterisk. However, in the .csv files IRS produces, no double asterisks are populated. Rather, missing fields are marked with a 0. This is most often a problem in extreme AGI brackets for sparsely populated counties. The researcher can compare the 0’s in later years with the prevalence of 0.0001 in the first two years of data to try and determine if the 0 represents a missing value.

-	From 2012 onward, AGI bracket $1 – 25k is split into $1 – 10k and $10k – 25k. To maintain identical bracket sizes, later years brackets 1 and 2 can be combined. Alternatively, the first two years of data can be abandoned and all 8 brackets can be used, or just brackets over $25k can be used for all years. 

-	Disclosure protection procedures: SOI is concerned about inadvertently revealing the identities of filers in sparsely populated County-Year-Brackets. They will not report a field if fewer than 20 returns are populated. Instead, they will combine that bracket with its nearest neighbor bracket. If this still does not yield more than 20 returns reporting the field, they combine it with a neighboring county. In addition, from 2012 onward, all counts of return variables are rounded to the nearest 10. Finally, SOI excludes tax returns that represent a large percentage of any particular variable for a given County-Year-Bracket. They do not disclose what the percentage must be, but give the example of a single return representing 75% of the value of a particular variable being excluded.

-	COVID related changes: for tax year 2019, IRS included a longer window of filed returns due to COVID. Rather than Jan 2020 - Dec 2020, they include Jan 2020 - July 2021. They similarly expand the window for 2020. Finally, IRS does not include returns that were filed solely to receive an economic impact payment.

-	To replicate the core dataset used in deHaan & Glover (2024), limit to years 2010 - 2019. Combine brackets 1 and 2 in the years from 2012 onward. Drop Arizona, Hawaii, and Alaska. Drop counties split by time zone (Gulf FL, Cherry NE, Dunn ND, Idaho ID, Malheur OR, McKenzie ND, Sioux ND, Stanley SD, Elko NV). Drop observations with number of returns (or number of returns with capital gains) missing. Refer to section III of the paper for additional details and descriptive statistics.
